### 객체지향 패러다임의 본질

- 객체지향 패러다임 관점에서 핵심은 역할, 책임, 협력이지 class가 아님
- 객체지향 설계의 핵심은 협력 구성을 위해 객체를 찾아, 책임을 할당하는 것
    - ex. “뷰 구현” 협력
        - “사용자에게 보여줄 뷰를 구현한다라는” 협력을 위해 UIComponent 객체와 레이아웃을 잡아줄 Layout 관리 객체들이 각자의 역할을 수행하는 것
        

## 협력, 책임, 역할

- **협력**이란 객체들간 기능구현을 위해 서로 상호작용 하는 것
- **책임**이란 객체가 협력에 참여하기 위해 수행하는 로직
- 객체들이 협력 안에서 수행하는 책임들이 모여 **역할**을 구성

### 1. 협력

- 두 객체는 협력을 위해, **메시지 전송**(message sending)으로 커뮤니케이션 수단을 사용
- 메세지 수신한 객체는 **메서드를** 실행해 요청에 응답
    - A → B 방향일 때, A객체는 메세지를 전송하는 객체, B 객체는 메세지를 수신해서 메서드를 실행함으로써 요청에 응답하는 객체
    - 결국, A객체가 B객체의 메세지 전송(**B 객체의 메서드 호출**), B 객체는 **메서드의 결과값을 전달**하여 요청에 응답
        
        ```swift
        
        class A {
        
           private let b: B
           
           public func userTotalFee(userCount: Int) -> Int {
              return userCount * b.userFee()
           }
           
        }
        
        ```
        

1. 객체의 자율성
- 자신의 상태를 직접 관리하고 스스로의 결정에 따라 행동하는 객체
- 필요한 정보와 정보에 기반한 행동을 같은 객체안에 모아둬야 함
- 자율성이 개선 사례 예시
    
    ![image](https://github.com/HM4725/ObjectStudy/assets/39371835/933c4aa0-dc13-472d-9330-cfd367523c41)

    
    - 영화예매를 담당하는 Screening 객체는 **영화요금만 필요하지만**, 할인 로직까지 알고 있는 상황
    - 영화 요금이 요금 계산에 책임이 있는 Movie가 아닌, **Screen에 책임이 있는 상황**
    - 요금 계산 객체가 자신이 알고 있는 정보만으로 요금을 계산할 수 없기 때문(요금 = 정가 - 할인 요금)
    - 따라서, TO-BE에서는 `Screening` 은 `Movie` 만 알도록 변경

### 2. 책임

- 객체의 책임은 **doing**과 **knowing**으로 구분
- 책임을 수행하기 위해선, 책임 수행에 필요한 정보도 함께 알아야 할 책임이 조재

1. 책임 할당(information expert 관점) 
- 자율적 객체를 만들기 위해선, 필요한 정보를 잘 알고 있는 객체에게 책임을 할당하는 것
- 필요한 더 작은 책임을 찾아내, 객체들에게 할당하는 반복적인 과정을 거침

→ 

- 결과적으로, 객체지향 설계는 협력에 필요한 메세지를 찾아, 해당 메세지에 적절한 객체를 선택하는 반복적인 과정
- 메세지가 수신할 객체의 책임을 결정

### 3. 역할

- 객체가 특정한 협력 안에서 수행하는 책임의 집합
- 여러 종류 객체를 포괄하는 **추상화**로 이해하면 간단
    - 할인 요금 계산에 책임이 있는 `DiscountPolicy`
    - 해당 프로토콜을 따르는 객체들 ex. `PercentDiscountPolicy`, `AmountPolicy` , `NonePolicy`
    - 결국 `DiscountPolicy` 역할을 따라는 여러 객체들이 존재
- 따라서 **책임에 대한 후보가 한개**일경우, **역할 = 객체** 동일함
- 객체는 하나의 역할이 아닌, 여러 역할을 수행하는 것이 가능함.(협력에 따라 다른 역할을 할 수 있음)

### 세가지의 관계도

협력 → 역할 → 객체 → 클래스

## 결론

1. 기능 구현을 위해, 객체들간 협력함
2. 협력에 필요한 메시지를 찾고, 해당 메세지에 적절한 객체를 선택
3. 메세지는 객체의 책임을 결정
    예시) 
    1. 영화 예매라는 협력, 이를 위해 요금 계산 메세지가 필요
    2. 요금 계산 메세지를 위해, Movie 객체를 선택
    3. Movie 객체의 책임은, 메세지를 통해 결정 → “요금 계산”에 책임을 가짐
4. 책임의 경우, 다양한 객체가 후보가 될 수 있으며 **역할**이라고 일컬음
    - 요금 계산시, 우린 다양한 할인 정책이 존재
    - 할인 정책을 계산하는 책임에는, **DiscountPolicy가 해당 역할** 담당
    - 다양한 객체가 해당 역할을 담당할 수 있음(퍼센트 할인정책, 금액 할인 정책 등..)
